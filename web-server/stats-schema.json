{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Stats",
  "type": "object",
  "properties": {
    "bfs_sample_stats": {
      "type": [
        "object",
        "null"
      ],
      "additionalProperties": {
        "$ref": "#/$defs/BfsSample"
      }
    },
    "bi_bfs_sample_stats": {
      "type": [
        "object",
        "null"
      ],
      "additionalProperties": {
        "$ref": "#/$defs/BiBfsSample"
      }
    },
    "created_at": {
      "description": "utc timestamp",
      "type": "integer",
      "format": "int64"
    },
    "dump_date": {
      "type": "string"
    },
    "local_wiki_sizes": {
      "anyOf": [
        {
          "$ref": "#/$defs/WikiSizes"
        },
        {
          "type": "null"
        }
      ]
    },
    "longest_name": {
      "type": "object",
      "additionalProperties": {
        "$ref": "#/$defs/Page"
      }
    },
    "longest_name_no_redirect": {
      "type": "object",
      "additionalProperties": {
        "$ref": "#/$defs/Page"
      }
    },
    "max_num_links": {
      "type": "array",
      "maxItems": 2,
      "minItems": 2,
      "prefixItems": [
        {
          "type": "string"
        },
        {
          "type": "integer",
          "format": "uint64",
          "minimum": 0
        }
      ]
    },
    "max_num_pages": {
      "type": "array",
      "maxItems": 2,
      "minItems": 2,
      "prefixItems": [
        {
          "type": "string"
        },
        {
          "type": "integer",
          "format": "uint64",
          "minimum": 0
        }
      ]
    },
    "min_num_links": {
      "type": "array",
      "maxItems": 2,
      "minItems": 2,
      "prefixItems": [
        {
          "type": "string"
        },
        {
          "type": "integer",
          "format": "uint64",
          "minimum": 0
        }
      ]
    },
    "min_num_pages": {
      "type": "array",
      "maxItems": 2,
      "minItems": 2,
      "prefixItems": [
        {
          "type": "string"
        },
        {
          "type": "integer",
          "format": "uint64",
          "minimum": 0
        }
      ]
    },
    "most_linked": {
      "type": "object",
      "additionalProperties": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/LinkCount"
        }
      }
    },
    "most_links": {
      "type": "object",
      "additionalProperties": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/LinkCount"
        }
      }
    },
    "num_dead_orphan_pages": {
      "type": "object",
      "additionalProperties": {
        "type": "integer",
        "format": "uint64",
        "minimum": 0
      }
    },
    "num_dead_pages": {
      "type": "object",
      "additionalProperties": {
        "type": "integer",
        "format": "uint64",
        "minimum": 0
      }
    },
    "num_linked_redirects": {
      "type": "object",
      "additionalProperties": {
        "type": "integer",
        "format": "uint64",
        "minimum": 0
      }
    },
    "num_links": {
      "type": "object",
      "additionalProperties": {
        "type": "integer",
        "format": "uint64",
        "minimum": 0
      }
    },
    "num_orphan_pages": {
      "type": "object",
      "additionalProperties": {
        "type": "integer",
        "format": "uint64",
        "minimum": 0
      }
    },
    "num_pages": {
      "type": "object",
      "additionalProperties": {
        "type": "integer",
        "format": "uint64",
        "minimum": 0
      }
    },
    "num_redirects": {
      "type": "object",
      "additionalProperties": {
        "type": "integer",
        "format": "uint64",
        "minimum": 0
      }
    },
    "seconds_taken": {
      "type": "integer",
      "format": "uint64",
      "minimum": 0
    },
    "web_wiki_sizes": {
      "anyOf": [
        {
          "$ref": "#/$defs/WebWikiSizes"
        },
        {
          "type": "null"
        }
      ]
    },
    "wikis": {
      "type": "array",
      "items": {
        "type": "string"
      }
    }
  },
  "required": [
    "num_pages",
    "num_redirects",
    "num_links",
    "num_linked_redirects",
    "most_linked",
    "most_links",
    "longest_name",
    "longest_name_no_redirect",
    "num_dead_pages",
    "num_orphan_pages",
    "num_dead_orphan_pages",
    "max_num_pages",
    "min_num_pages",
    "max_num_links",
    "min_num_links",
    "created_at",
    "dump_date",
    "wikis",
    "seconds_taken"
  ],
  "$defs": {
    "AvgDepthStat": {
      "type": "object",
      "properties": {
        "avg_occurences": {
          "type": "number",
          "format": "double"
        },
        "std_dev": {
          "type": "number",
          "format": "double"
        }
      },
      "required": [
        "avg_occurences",
        "std_dev"
      ]
    },
    "BfsSample": {
      "type": "object",
      "properties": {
        "avg_depth_histogram": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^\\d+$": {
              "$ref": "#/$defs/AvgDepthStat"
            }
          }
        },
        "deep_stat": {
          "$ref": "#/$defs/MaxMinAvg"
        },
        "num_visited_map": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^\\d+$": {
              "type": "string"
            }
          }
        },
        "path_depth_map": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^\\d+$": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "sample_size": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "seconds_taken": {
          "type": "integer",
          "format": "uint64",
          "minimum": 0
        },
        "visit_stat": {
          "$ref": "#/$defs/MaxMinAvg2"
        }
      },
      "required": [
        "sample_size",
        "deep_stat",
        "path_depth_map",
        "visit_stat",
        "num_visited_map",
        "avg_depth_histogram",
        "seconds_taken"
      ]
    },
    "BiBfsSample": {
      "type": "object",
      "properties": {
        "longest_path_stat": {
          "$ref": "#/$defs/MaxMinAvg"
        },
        "path_length_histogram": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^\\d+$": {
              "type": "integer",
              "format": "uint64",
              "minimum": 0
            }
          }
        },
        "sample_size": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "seconds_taken": {
          "type": "integer",
          "format": "uint64",
          "minimum": 0
        }
      },
      "required": [
        "sample_size",
        "longest_path_stat",
        "path_length_histogram",
        "seconds_taken"
      ]
    },
    "LinkCount": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "format": "uint64",
          "minimum": 0
        },
        "page_id": {
          "type": "integer",
          "format": "uint64",
          "minimum": 0
        },
        "page_title": {
          "type": "string"
        },
        "wiki_name": {
          "type": "string"
        }
      },
      "required": [
        "page_title",
        "page_id",
        "wiki_name",
        "count"
      ]
    },
    "MaxMinAvg": {
      "type": "object",
      "properties": {
        "avg": {
          "type": "number",
          "format": "double"
        },
        "max": {
          "type": "array",
          "maxItems": 2,
          "minItems": 2,
          "prefixItems": [
            {
              "type": "array",
              "maxItems": 2,
              "minItems": 2,
              "prefixItems": [
                {
                  "type": "string"
                },
                {
                  "type": "string"
                }
              ]
            },
            {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          ]
        },
        "min": {
          "type": "array",
          "maxItems": 2,
          "minItems": 2,
          "prefixItems": [
            {
              "type": "array",
              "maxItems": 2,
              "minItems": 2,
              "prefixItems": [
                {
                  "type": "string"
                },
                {
                  "type": "string"
                }
              ]
            },
            {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          ]
        }
      },
      "required": [
        "min",
        "max",
        "avg"
      ]
    },
    "MaxMinAvg2": {
      "type": "object",
      "properties": {
        "avg": {
          "type": "number",
          "format": "double"
        },
        "max": {
          "type": "array",
          "maxItems": 2,
          "minItems": 2,
          "prefixItems": [
            {
              "type": "string"
            },
            {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          ]
        },
        "min": {
          "type": "array",
          "maxItems": 2,
          "minItems": 2,
          "prefixItems": [
            {
              "type": "string"
            },
            {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          ]
        }
      },
      "required": [
        "min",
        "max",
        "avg"
      ]
    },
    "Page": {
      "type": "object",
      "properties": {
        "page_id": {
          "type": "integer",
          "format": "uint64",
          "minimum": 0
        },
        "page_title": {
          "type": "string"
        },
        "wiki_name": {
          "type": "string"
        }
      },
      "required": [
        "page_title",
        "page_id",
        "wiki_name"
      ]
    },
    "WebWikiSize": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "selected_tables_size": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint64",
          "minimum": 0
        },
        "total_size": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint64",
          "minimum": 0
        }
      },
      "required": [
        "name"
      ]
    },
    "WebWikiSizes": {
      "type": "object",
      "properties": {
        "sizes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/WebWikiSize"
          }
        },
        "tables": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "sizes",
        "tables"
      ]
    },
    "WikiSize": {
      "type": "object",
      "properties": {
        "download_size": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint64",
          "minimum": 0
        },
        "name": {
          "type": "string"
        },
        "processed_size": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint64",
          "minimum": 0
        }
      },
      "required": [
        "name"
      ]
    },
    "WikiSizes": {
      "type": "object",
      "properties": {
        "sizes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/WikiSize"
          }
        },
        "tables": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "sizes",
        "tables"
      ]
    }
  }
}